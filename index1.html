<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>勞工健康服務資料上傳</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{background:#f5f9ff;font-family:"Microsoft JhengHei",system-ui}
.page-title{font-weight:800;font-size:2rem}
.version-tag{font-size:.85rem;font-weight:600;color:#2563eb;background:#e0f2fe;padding:2px 10px;border-radius:999px;margin-left:8px}
.upload-card{background:#fff;border-radius:20px;padding:32px;box-shadow:0 10px 30px rgba(0,0,0,.08)}
.drop-zone{border:2px dashed #60a5fa;border-radius:16px;padding:60px;text-align:center;cursor:pointer;background:#eff6ff}
.drop-zone:hover{background:#dbeafe}
.ocr-progress-box{margin-top:20px;padding:16px;background:#ecfeff;border-radius:14px}
.ocr-status{font-weight:700;color:#0369a1;margin-bottom:10px}
.progress{height:10px;border-radius:999px;overflow:hidden;background:#e5e7eb}
.progress-bar{background:linear-gradient(90deg,#38bdf8,#2563eb);font-size:.7rem;line-height:10px;color:#fff;transition:width .3s}
.hidden{display:none}
</style>
</head>

<body>
<div class="container py-5">
  <h1 class="page-title">
    勞工健康服務資料上傳
    <span id="page-version" class="version-tag"></span>
  </h1>
  <p class="text-muted mb-4">自動辨識 → 校對 → 送審</p>

  <div class="upload-card">
    <h4 class="fw-bold mb-3">STEP 1｜上傳執行紀錄表</h4>

    <div id="dropZone" class="drop-zone">
      <div style="font-size:48px">☁️</div>
      <div class="fw-bold mt-2">點擊上傳 PDF / 圖檔</div>
    </div>
    <input type="file" id="fileInput" accept=".pdf,.png,.jpg,.jpeg" class="hidden">

    <div id="ocrBox" class="ocr-progress-box hidden">
      <div class="ocr-status">OCR 辨識中…</div>
      <div class="progress">
        <div id="ocrBar" class="progress-bar" style="width:0%">0%</div>
      </div>
    </div>
  </div>
</div>

<script>
const APP_VERSION="1.01";
document.getElementById("page-version").innerText="v"+APP_VERSION;

const dropZone=document.getElementById("dropZone");
const fileInput=document.getElementById("fileInput");
const ocrBox=document.getElementById("ocrBox");
const ocrBar=document.getElementById("ocrBar");

dropZone.onclick=()=>fileInput.click();

fileInput.onchange=()=>{
  if(!fileInput.files.length)return;
  startOCR();
};

function startOCR(){
  ocrBox.classList.remove("hidden");
  let progress=0;
  const timer=setInterval(()=>{
    progress+=Math.floor(Math.random()*7)+4;
    if(progress>=90)progress=90;
    ocrBar.style.width=progress+"%";
    ocrBar.innerText=progress+"%";
  },400);

  setTimeout(()=>{
    clearInterval(timer);
    ocrBar.style.width="100%";
    ocrBar.innerText="100%";
  },4500);
}
</script>
</body>
</html>
